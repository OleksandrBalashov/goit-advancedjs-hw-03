{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/markups.js","../src/notifications.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\nconst API_KEY =\n  'live_zCoIfZgI2pTuINdDO1yjDpbgcwKA9fmB1Fcl70UrefaGBjTUS9X0S4AtHVTqNUNC';\n\naxios.defaults.baseURL = 'https://api.thecatapi.com/v1';\naxios.defaults.headers.common['x-api-key'] = API_KEY;\n\nconst fetchBreeds = () => axios.get('/breeds');\n\nconst fetchCatByBreed = breedId => {\n  const params = new URLSearchParams({\n    breed_ids: breedId,\n  });\n\n  return axios.get(`/images/search?${params}`);\n};\n\nexport { fetchBreeds, fetchCatByBreed };\n","function createCatInfoMarkup(data) {\n  return data.breeds\n    .map(\n      ({ name, description, temperament }) => `\n    <img src=\"${data.url}\" width=\"500\" alt=\"${name}\" class=\"img\" />\n    <div>\n      <h2 class=\"title\">${name}</h2>\n      <p class=\"desc\">${description}</p>\n      <p class=\"desc\"><b>Temperament: </b>${temperament}</p>\n    </div>\n  `\n    )\n    .join('');\n}\n\nexport { createCatInfoMarkup };\n","import iziToast from 'izitoast';\n\nexport function errorToast() {\n  iziToast.show({\n    title: 'Oops!',\n    message: 'Something went wrong! Try reloading the page!',\n    color: 'red',\n    position: 'topRight',\n  });\n}\n","import SlimSelect from 'slim-select';\nimport { fetchBreeds, fetchCatByBreed } from './cat-api';\nimport { createCatInfoMarkup } from './markups';\nimport { errorToast } from './notifications';\nimport 'slim-select/styles';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'normalize.css';\n\nlet initialize = false;\n\nconst refs = {\n  select: document.querySelector('.breed-select'),\n  loader: document.querySelector('.loader'),\n  catInfo: document.querySelector('.cat-info'),\n};\n\nconst select = new SlimSelect({\n  select: refs.select,\n  settings: {\n    placeholderText: 'Filter cats breeds',\n    disabled: true,\n  },\n});\n\nsetIsFetching(true);\nfetchBreeds()\n  .then(({ data }) => {\n    select.setData(data.map(({ id, name }) => ({ value: id, text: name })));\n    initialize = true;\n    select.enable();\n  })\n  .catch(() => errorToast())\n  .finally(() => setIsFetching(false));\n\nrefs.select.addEventListener('change', ({ target: { value } }) => {\n  if (!initialize) return;\n\n  select.disable();\n\n  refs.catInfo.innerHTML = '';\n\n  setIsFetching(true);\n\n  fetchCatByBreed(value)\n    .then(({ data }) => {\n      const [responce] = data;\n\n      if (!responce) throw new Error();\n\n      refs.catInfo.innerHTML = createCatInfoMarkup(responce);\n      select.enable();\n    })\n    .catch(() => errorToast())\n    .finally(() => setIsFetching(false));\n});\n\nfunction setIsFetching(value) {\n  value\n    ? (refs.loader.style.display = 'block')\n    : (refs.loader.style.display = 'none');\n}\n"],"names":["API_KEY","axios","fetchBreeds","fetchCatByBreed","breedId","params","createCatInfoMarkup","data","name","description","temperament","errorToast","iziToast","initialize","refs","select","SlimSelect","setIsFetching","id","value","responce"],"mappings":"owBACA,MAAMA,EACJ,wEAEFC,EAAM,SAAS,QAAU,+BACzBA,EAAM,SAAS,QAAQ,OAAO,aAAeD,EAE7C,MAAME,EAAc,IAAMD,EAAM,IAAI,SAAS,EAEvCE,EAAkBC,GAAW,CACjC,MAAMC,EAAS,IAAI,gBAAgB,CACjC,UAAWD,CACf,CAAG,EAED,OAAOH,EAAM,IAAI,kBAAkBI,GAAQ,CAC7C,ECfA,SAASC,EAAoBC,EAAM,CACjC,OAAOA,EAAK,OACT,IACC,CAAC,CAAE,KAAAC,EAAM,YAAAC,EAAa,YAAAC,CAAa,IAAK;AAAA,gBAC9BH,EAAK,yBAAyBC;AAAA;AAAA,0BAEpBA;AAAA,wBACFC;AAAA,4CACoBC;AAAA;AAAA,GAGvC,EACA,KAAK,EAAE,CACZ,CCXO,SAASC,GAAa,CAC3BC,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,gDACT,MAAO,MACP,SAAU,UACd,CAAG,CACH,CCDA,IAAIC,EAAa,GAEjB,MAAMC,EAAO,CACX,OAAQ,SAAS,cAAc,eAAe,EAC9C,OAAQ,SAAS,cAAc,SAAS,EACxC,QAAS,SAAS,cAAc,WAAW,CAC7C,EAEMC,EAAS,IAAIC,EAAW,CAC5B,OAAQF,EAAK,OACb,SAAU,CACR,gBAAiB,qBACjB,SAAU,EACX,CACH,CAAC,EAEDG,EAAc,EAAI,EAClBf,EAAa,EACV,KAAK,CAAC,CAAE,KAAAK,KAAW,CAClBQ,EAAO,QAAQR,EAAK,IAAI,CAAC,CAAE,GAAAW,EAAI,KAAAV,CAAM,KAAM,CAAE,MAAOU,EAAI,KAAMV,CAAM,EAAC,CAAC,EACtEK,EAAa,GACbE,EAAO,OAAM,CACjB,CAAG,EACA,MAAM,IAAMJ,GAAY,EACxB,QAAQ,IAAMM,EAAc,EAAK,CAAC,EAErCH,EAAK,OAAO,iBAAiB,SAAU,CAAC,CAAE,OAAQ,CAAE,MAAAK,CAAK,KAAS,CAC3DN,IAELE,EAAO,QAAO,EAEdD,EAAK,QAAQ,UAAY,GAEzBG,EAAc,EAAI,EAElBd,EAAgBgB,CAAK,EAClB,KAAK,CAAC,CAAE,KAAAZ,KAAW,CAClB,KAAM,CAACa,CAAQ,EAAIb,EAEnB,GAAI,CAACa,EAAU,MAAM,IAAI,MAEzBN,EAAK,QAAQ,UAAYR,EAAoBc,CAAQ,EACrDL,EAAO,OAAM,CACnB,CAAK,EACA,MAAM,IAAMJ,GAAY,EACxB,QAAQ,IAAMM,EAAc,EAAK,CAAC,EACvC,CAAC,EAED,SAASA,EAAcE,EAAO,CAC5BA,EACKL,EAAK,OAAO,MAAM,QAAU,QAC5BA,EAAK,OAAO,MAAM,QAAU,MACnC"}